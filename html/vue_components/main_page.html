<template id='main-page-template'>
<div class="container mt-2">
	<div class="row">
	<div class="col-md-12">
		<h1 tt="toolname"></h1>
    	<p tt="tooldesc"></p>
        <div>
            <table class="table">
                <tr>
                    <th>#</th>
                    <th tt='list_name'></th>
                    <th tt='rights'></th>
                </tr>
                <tr v-for='list in user_lists'>
                    <td>
                        <router-link :to="'/list/'+list.id">{{list.id}}</router-link>
                    </td>
                    <td>
                        {{list.name}}
                    </td>
                    <td>
                        {{list.rights}}
                    </td>
                </tr>
            </table>
        </div>
    </div>
  </div>
</div>
</template>

<script>
'use strict';


let MainPage = Vue.extend ( {
    props : [] ,
    data : function () { return { user_lists:[] } } ,
    created : function () {
        this.load_user_lists();
    } ,
    updated : function () { tt.updateInterface(this.$el) } ,
    mounted : function () { tt.updateInterface(this.$el) } ,
    methods : {
        load_user_lists: function() {
            let self = this ;
            $.get("/auth/lists/write,admin",function(d){
                if ( d.status=="OK" ) self.user_lists = d.lists;
                else {
                    self.user_lists = [];
                    console.log("Could not load lists for user");
                }
            },"json")
        }
    } ,
    template:'#main-page-template'
} );
</script>